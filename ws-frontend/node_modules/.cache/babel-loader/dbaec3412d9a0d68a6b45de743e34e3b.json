{"ast":null,"code":"import axios from 'axios';\nexport default {\n  name: \"ViewMoreView\",\n  data: function data() {\n    return {\n      proizvod: null,\n      najvecaPonuda: null\n    };\n  },\n  mounted: function mounted() {\n    this.fetchProizvod();\n    this.isUserLogged();\n  },\n  methods: {\n    fetchProizvod: function fetchProizvod() {\n      var _this = this;\n\n      var id = this.$route.params.id;\n      axios.get(\"http://localhost:8081/api/products/\".concat(id), {\n        withCredentials: true\n      }).then(function (response) {\n        _this.proizvod = response.data;\n\n        if (_this.proizvod.ponude[0] == null) {\n          _this.najvecaPonuda = 0;\n        }\n\n        for (ponuda in _this.proizvod.ponude) {\n          if (ponuda > _this.najvecaPonuda) {\n            _this.najvecaPonuda = ponuda.cena;\n          }\n        }\n      })[\"catch\"](function (error) {\n        console.log(error);\n        alert(\"Ne postoji proizvod sa tim ID-em\");\n      });\n    },\n    login: function login() {\n      this.$router.push(\"/api/login\");\n    },\n    register: function register() {\n      this.$router.push(\"/api/register\");\n    },\n    goHome: function goHome() {\n      this.$router.push(\"/api/home\");\n    },\n    vidiProdavca: function vidiProdavca() {\n      this.$router.push(\"/api/prodavac/proizvod/\" + this.$route.params.id);\n    },\n    search: function search() {\n      var _this2 = this;\n\n      if (this.searchTerm === \"\") {\n        this.getProizvodi();\n      } else {\n        axios.get(\"http://localhost:8081/api/search-products/\" + this.searchTerm, {\n          withCredentials: true\n        }).then(function (response) {\n          _this2.proizvodi = response.data;\n        })[\"catch\"](function (err) {\n          console.log(err);\n          alert(\"Something went wrong!\");\n        });\n      }\n    },\n    updateKupac: function updateKupac() {\n      var korisnik = JSON.parse(localStorage.getItem('loggedUser'));\n      this.$router.push(\"/api/kupac/update/\" + korisnik.korisnickoIme);\n    },\n    logOut: function logOut() {\n      localStorage.removeItem('loggedUser');\n      this.loggedUser = null;\n      alert(\"Uspesno ste se odjavili!\");\n      this.$router.push('/api/home');\n    },\n    isUserLogged: function isUserLogged() {\n      if (localStorage.getItem('loggedUser') == null) {\n        this.$router.push('/api/home');\n      } else {\n        var korisnik = JSON.parse(localStorage.getItem('loggedUser'));\n\n        if (korisnik.uloga == 'KUPAC') {} else if (korisnik.uloga == 'PRODAVAC') {\n          this.$router.push('/prodavac_view');\n        } else {\n          this.$router.push('/administrator_view');\n        }\n      }\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["axios","name","data","proizvod","najvecaPonuda","mounted","fetchProizvod","isUserLogged","methods","id","$route","params","get","withCredentials","then","response","ponude","ponuda","cena","error","console","log","alert","login","$router","push","register","goHome","vidiProdavca","search","searchTerm","getProizvodi","proizvodi","err","updateKupac","korisnik","JSON","parse","localStorage","getItem","korisnickoIme","logOut","removeItem","loggedUser","uloga"],"sourceRoot":"","sources":["/home/ivan/Documents/Faks/Web/Projekat/project-web-in-2024-team-12/ws-frontend/src/views/KupacViewMoreView.vue"],"sourcesContent":["<template>\n   <nav class=\"navbar navbar-expand-lg bg-body-tertiary\">\n    <div class=\"container-fluid\">\n      <a class=\"navbar-brand\" href=\"#\">WebShop</a>\n      <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n        <span class=\"navbar-toggler-icon\"></span>\n      </button>\n      <div class=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n        <ul class=\"navbar-nav mb-2 mb-lg-0\">\n          <li class=\"nav-item\">\n            <a class=\"nav-link active\" aria-current=\"page\" href=\"#\" v-on:click=\"goHome()\">Pocetna</a>\n          </li>\n          <li class=\"nav-item\">\n            <a class=\"nav-link\" href=\"#\">Link</a>\n          </li>\n        </ul>\n       \n        <div class=\"d-grid gap-2 d-md-flex justify-content-md-end\">\n         <img v-on:click=\"updateKupac()\" src=\"https://cdn-icons-png.flaticon.com/256/6522/6522516.png\" id=\"profile-photo\">\n         <p id=\"log-out\" v-on:click=\"logOut()\">Log out</p>\n        </div>\n      </div>\n    </div>\n  </nav>\n    <div v-if=\"proizvod\">\n      <h1 class=\"nazivProizvoda\">{{ proizvod.naziv }}</h1>\n      <img :src=\"proizvod.slika\" alt=\"slika proizvoda\" class=\"product-image\">\n      <p v-on:click=\"vidiProdavca()\">Profil prodavca</p>\n      <p><strong>{{ proizvod.opis }}</strong></p>\n      <ul>\n        <li><strong>Cena:</strong> {{ proizvod.cena }} RSD</li>\n        <li><strong>Kategorija:</strong> {{ proizvod.kategorija.naziv }}</li>\n        <li><strong>Tip prodaje:</strong> {{ proizvod.tipProdaje }}</li>\n      </ul>\n      <div v-if=\"proizvod.tipProdaje == 'FIKSNACENA'\" id=\"div-fiksna\">\n        <button class=\"btn btn-primary\" id=\"btn-fiksna\">Kupi</button>\n      </div>\n      <div id=\"aukcija\" v-else>\n        <div class=\"col-md-6\">\n            <label for=\"inputNajvecaCena\" class=\"form-label\">Najveca ponuda</label>\n            <input disabled=\"true\" type=\"text\" class=\"form-control\" id=\"inputNajvecaCena\">\n        </div>\n        <div class=\"col-md-6\">\n            <label for=\"inputPonuda\" class=\"form-label\">Ponuda</label>\n            <input type=\"text\" class=\"form-control\" id=\"inputPonuda\" >\n            <button class=\"btn btn-primary\" id=\"btn-aukcija\">Ponudi</button>\n        </div>\n\n      </div>\n    </div>\n    <div v-else>\n      <p>Proizvod se uƒçitava ili ne postoji.</p>\n    </div>\n  </template>\n  \n  <script>\n  import axios from 'axios';\n  \n  export default {\n    name: \"ViewMoreView\",\n    data() {\n      return {\n        proizvod: null,\n        najvecaPonuda : null\n      };\n    },\n    mounted() {\n      this.fetchProizvod();\n      this.isUserLogged();\n    },\n    methods: {\n        fetchProizvod() {\n            const id = this.$route.params.id;\n            axios.get(`http://localhost:8081/api/products/${id}`, { withCredentials: true })\n                .then((response) => {\n                    this.proizvod = response.data;\n                    if(this.proizvod.ponude[0] == null){\n                        this.najvecaPonuda = 0;\n                    }\n                    for(ponuda in this.proizvod.ponude){\n                        if(ponuda > this.najvecaPonuda){\n                            this.najvecaPonuda = ponuda.cena;\n                        }\n                    }\n                })\n                .catch((error) => {\n                    console.log(error);\n                    alert(\"Ne postoji proizvod sa tim ID-em\");\n                });\n      },\n      login: function () {\n      this.$router.push(\"/api/login\");\n    },\n    register: function () {\n      this.$router.push(\"/api/register\");\n    },\n    goHome: function () {\n      this.$router.push(\"/api/home\");\n    },\n    vidiProdavca: function () {\n      this.$router.push(\"/api/prodavac/proizvod/\"+this.$route.params.id);\n    },\n    search: function () {\n      if(this.searchTerm === \"\"){\n        this.getProizvodi();\n\n      } else{\n        axios\n        .get(\"http://localhost:8081/api/search-products/\"+ this.searchTerm, { withCredentials: true })\n        .then((response) => {\n        this.proizvodi = response.data;\n        \n      })\n        .catch((err) => {\n        console.log(err);\n        alert(\"Something went wrong!\");\n      });\n\n      }\n     \n    },\n    updateKupac: function () {\n      const korisnik = JSON.parse(localStorage.getItem('loggedUser'));\n      this.$router.push(\"/api/kupac/update/\"+korisnik.korisnickoIme);\n    },\n    logOut: function () {\n      localStorage.removeItem('loggedUser');\n      this.loggedUser = null;\n      alert(\"Uspesno ste se odjavili!\");\n      this.$router.push('/api/home');\n    },\n    isUserLogged: function () {\n      if (localStorage.getItem('loggedUser') == null) {\n        this.$router.push('/api/home');\n      }\n      else {\n        const korisnik = JSON.parse(localStorage.getItem('loggedUser'));\n        if (korisnik.uloga == 'KUPAC') {\n          \n        }\n        else if (korisnik.uloga == 'PRODAVAC') {\n          this.$router.push('/prodavac_view');\n        }\n        else {\n          this.$router.push('/administrator_view');\n        }\n      }\n    },\n    }\n  };\n  </script>\n  \n  <style scoped>\n  ul li{\n    list-style-type: none;\n    padding: 0;\n    margin: 0;\n  }\n  .product-image {\n    max-width: 100%;\n    height: auto;\n  }\n  .nazivProizvoda{\n    padding: 15px;\n  }\n\n  #loginBtn {\n  background-color: #858585;\n  border-color: #858585;\n}\n\n#loginBtn:hover {\n  background-color: #3e4240;\n}\n\n#registerBtn {\n  background-color: #858585;\n  border-color: #858585;\n}\n\n#registerBtn:hover {\n  background-color: #3e4240;\n}\n\n.d-flex {\n  margin-right: auto;\n}\n\n#profile-photo{\n    width: 15%;\n    margin-right: 30px;\n    \n}\n#div-aukcija{\nmargin: auto;\n}\n\n.mt-5 {\n  width: 15%;\n  height: 100%;\n  position: fixed;\n  display:block;\n  margin-left: 50px;\n  margin-right: 50px;\n\n \n  \n\n}\n\n.justify-content-md-end{\n    margin-left: auto;\n    margin-right: 50px;\n}\n\n#log-out{\n    margin-top: auto;\n}\n\n.col-md-6{\n    margin: auto;\n    margin-top: 30px;\n    margin-bottom: 30px;\n}\n\n#btn-aukcija{\n    margin-top: 30px;\n}\n  </style>"]},"metadata":{},"sourceType":"module"}