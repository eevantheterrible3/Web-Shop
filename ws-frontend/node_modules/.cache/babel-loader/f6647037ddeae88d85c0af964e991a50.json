{"ast":null,"code":"import _createForOfIteratorHelper from \"/home/ivan/Documents/Faks/Web/Projekat/project-web-in-2024-team-12/ws-frontend/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport axios from 'axios';\nexport default {\n  name: \"ViewMoreView\",\n  data: function data() {\n    return {\n      proizvod: null,\n      najvecaPonuda: 0,\n      vrednostPonude: 0,\n      ponuda: {},\n      seeButton: false\n    };\n  },\n  mounted: function mounted() {\n    this.fetchProizvod();\n    this.isUserLogged();\n    this.seeAuctionButton();\n  },\n  methods: {\n    fetchProizvod: function fetchProizvod() {\n      var _this = this;\n\n      var id = this.$route.params.id;\n      axios.get(\"http://localhost:8081/api/products/\".concat(id), {\n        withCredentials: true\n      }).then(function (response) {\n        _this.proizvod = response.data;\n\n        var _iterator = _createForOfIteratorHelper(_this.proizvod.ponude),\n            _step;\n\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var ponuda = _step.value;\n            console.log(ponuda.cena);\n\n            if (ponuda.cena > _this.najvecaPonuda) {\n              _this.najvecaPonuda = ponuda.cena;\n            }\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n\n        console.log(response.data);\n      })[\"catch\"](function (error) {\n        console.log(error); //alert(error.data);\n      });\n    },\n    login: function login() {\n      this.$router.push(\"/api/login\");\n    },\n    seeAuctionButton: function seeAuctionButton() {\n      if (this.proizvod.tipProdaje == 'AUKCIJA' && this.proizvod.prodavac.korisnickoIme == JSON.parse(localStorage.getItem(\"loggedUser\")).korisnickoIme) {\n        this.seeButton = true;\n      } else {\n        this.seeButton = false;\n      }\n    },\n    register: function register() {\n      this.$router.push(\"/api/register\");\n    },\n    goHome: function goHome() {\n      this.$router.push(\"/api/home\");\n    },\n    addProduct: function addProduct() {\n      this.$router.push(\"/api/prodavac/add-product/\" + JSON.parse(localStorage.getItem(\"loggedUser\")).korisnickoIme);\n    },\n    vidiProdavca: function vidiProdavca() {\n      this.$router.push(\"/api/prodavac/prodavac/proizvod/\" + this.$route.params.id);\n    },\n    updateProdavac: function updateProdavac() {\n      var korisnik = JSON.parse(localStorage.getItem('loggedUser'));\n      this.$router.push(\"/api/prodavac/update/\" + korisnik.korisnickoIme);\n    },\n    checkSession: function checkSession() {\n      axios.get(\"http://localhost:8081/api/check-session\", {\n        withCredentials: true\n      }).then(function (response) {\n        console.log(response.data);\n      })[\"catch\"](function (err) {\n        console.log(err);\n        alert(err.response.data);\n      });\n    },\n    viewUsers: function viewUsers() {\n      this.$router.push(\"/api/kupac/korisnici\");\n    },\n    ponudi: function ponudi() {\n      var logovani = JSON.parse(localStorage.getItem(\"loggedUser\"));\n      console.log(this.vrednostPonude);\n      axios.post(\"http://localhost:8081/api/proizvod-aukcija/\" + this.proizvod.id + \"?ponuda=\" + this.vrednostPonude, logovani, {\n        withCredentials: true\n      }).then(function (response) {\n        alert(response.data);\n      })[\"catch\"](function (err) {\n        console.log(err);\n        alert(err.response.data);\n      });\n    },\n    logOut: function logOut() {\n      localStorage.removeItem('loggedUser');\n      this.ulogovaniKorisnik = null;\n      alert(\"Uspesno ste se odjavili!\");\n      this.$router.push('/api/home');\n    },\n    isUserLogged: function isUserLogged() {\n      if (localStorage.getItem('loggedUser') == null) {\n        this.$router.push('/api/home');\n      } else {\n        var korisnik = JSON.parse(localStorage.getItem('loggedUser'));\n\n        if (korisnik.uloga == 'PRODAVAC') {} else if (korisnik.uloga == 'KUPAC') {\n          this.$router.push('/kupac/home/' + korisnik.korisnickoIme);\n        } else {\n          this.$router.push('/administrator_view');\n        }\n      }\n    },\n    kupiFiksna: function kupiFiksna() {\n      var logovani = JSON.parse(localStorage.getItem(\"loggedUser\"));\n      axios.post(\"http://localhost:8081/api/proizvod-fiksnacena/\" + this.proizvod.id, logovani, {\n        withCredentials: true\n      }).then(function (response) {\n        alert(response.data);\n      })[\"catch\"](function (err) {\n        console.log(err);\n        alert(err.response.data);\n      });\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["axios","name","data","proizvod","najvecaPonuda","vrednostPonude","ponuda","seeButton","mounted","fetchProizvod","isUserLogged","seeAuctionButton","methods","id","$route","params","get","withCredentials","then","response","ponude","console","log","cena","error","login","$router","push","tipProdaje","prodavac","korisnickoIme","JSON","parse","localStorage","getItem","register","goHome","addProduct","vidiProdavca","updateProdavac","korisnik","checkSession","err","alert","viewUsers","ponudi","logovani","post","logOut","removeItem","ulogovaniKorisnik","uloga","kupiFiksna"],"sourceRoot":"","sources":["/home/ivan/Documents/Faks/Web/Projekat/project-web-in-2024-team-12/ws-frontend/src/views/ProdavacViewMoreView.vue"],"sourcesContent":["<template>\n    <nav class=\"navbar navbar-expand-lg bg-body-tertiary\">\n     <div class=\"container-fluid\">\n       <a class=\"navbar-brand\" href=\"#\">WebShop</a>\n       <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n         <span class=\"navbar-toggler-icon\"></span>\n       </button>\n       <div class=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n         <ul class=\"navbar-nav mb-2 mb-lg-0\">\n           <li class=\"nav-item\">\n             <a class=\"nav-link active\" aria-current=\"page\" href=\"#\" v-on:click=\"goHome()\">Pocetna</a>\n           </li>\n           <li class=\"nav-item\">\n            <a class=\"nav-link\" href=\"#\" v-on:click=\"viewUsers()\">Korisnici</a>\n          </li>\n          <li class=\"nav-item\">\n            <a class=\"nav-link\" href=\"#\" v-on:click=\"addProduct()\">Dodaj proizvod</a>\n          </li>\n         </ul>\n        \n         <div class=\"d-grid gap-2 d-md-flex justify-content-md-end\">\n          <img v-on:click=\"updateProdavac()\" src=\"https://cdn-icons-png.flaticon.com/256/6522/6522516.png\" id=\"profile-photo\">\n          <p id=\"log-out\" v-on:click=\"logOut()\">Log out</p>\n         </div>\n       </div>\n     </div>\n   </nav>\n     <div v-if=\"proizvod\">\n       <h1 class=\"nazivProizvoda\">{{ proizvod.naziv }}</h1>\n       <img :src=\"proizvod.slika\" alt=\"slika proizvoda\" class=\"product-image\">\n       <p v-on:click=\"vidiProdavca()\">Profil prodavca</p>\n       <p><strong>{{ proizvod.opis }}</strong></p>\n       <ul>\n         <li><strong>Cena:</strong> {{ proizvod.cena }} RSD</li>\n         <li><strong>Kategorija:</strong> {{ proizvod.kategorija.naziv }}</li>\n         <li><strong>Tip prodaje:</strong> {{ proizvod.tipProdaje }}</li>\n         <div v-if=\"proizvod.tipProdaje == 'AUKCIJA'\" id=\"div-aukcija\">\n        <button class=\"btn btn-primary\" id=\"btn-aukcija\" v-on:click=\"krajAukcija()\">Zavrsi aukciju</button>\n      </div>\n       </ul>\n       <!-- <div v-if=\"proizvod.tipProdaje == 'FIKSNACENA'\" id=\"div-fiksna\">\n         <button class=\"btn btn-primary\" id=\"btn-fiksna\" v-on:click=\"kupiFiksna()\">Kupi</button>\n       </div>\n       <div id=\"aukcija\" v-else>\n         <div class=\"col-md-6\">\n             <label for=\"inputNajvecaCena\" class=\"form-label\">Najveca ponuda</label>\n             <input disabled=\"true\" type=\"text\" class=\"form-control\" id=\"inputNajvecaCena\" v-model=\"najvecaPonuda\">\n         </div>\n         <div class=\"col-md-6\">\n             <label for=\"inputPonuda\" class=\"form-label\">Ponuda</label>\n             <input type=\"number\" class=\"form-control\" id=\"inputPonuda\" v-model=\"vrednostPonude\">\n             <button class=\"btn btn-primary\" id=\"btn-aukcija\" v-on:click=\"ponudi()\" >Ponudi</button>\n         </div> -->\n \n       \n     </div>\n     <div v-else>\n       <p>Proizvod se učitava ili ne postoji.</p>\n     </div>\n   </template>\n   \n   <script>\n   import axios from 'axios';\n   \n   export default {\n     name: \"ViewMoreView\",\n     data() {\n       return {\n         proizvod: null,\n         najvecaPonuda : 0,\n         vrednostPonude : 0,\n         ponuda : {},\n         seeButton: false,\n       };\n     },\n     mounted() {\n       this.fetchProizvod();\n       this.isUserLogged();\n       this.seeAuctionButton();\n       \n     },\n     methods: {\n         fetchProizvod() {\n             const id = this.$route.params.id;\n             axios.get(`http://localhost:8081/api/products/${id}`, { withCredentials: true })\n                 .then((response) => {\n                     this.proizvod = response.data;\n                    \n                     for(let ponuda of this.proizvod.ponude){\n                         console.log(ponuda.cena);\n                         if(ponuda.cena > this.najvecaPonuda){\n                             this.najvecaPonuda = ponuda.cena;\n                         }\n                     }\n                    console.log(response.data);\n                 })\n                 .catch((error) => {\n                     console.log(error);\n                     //alert(error.data);\n                 });\n       },\n       login: function () {\n       this.$router.push(\"/api/login\");\n     },\n\n     seeAuctionButton:function(){\n      if(this.proizvod.tipProdaje == 'AUKCIJA' && this.proizvod.prodavac.korisnickoIme == JSON.parse(localStorage.getItem(\"loggedUser\")).korisnickoIme){\n        this.seeButton = true;\n      }\n      else{\n        this.seeButton = false;\n      }\n\n     },\n     register: function () {\n       this.$router.push(\"/api/register\");\n     },\n     goHome: function () {\n       this.$router.push(\"/api/home\");\n     },\n     addProduct: function () {\n      this.$router.push(\"/api/prodavac/add-product/\" + JSON.parse(localStorage.getItem(\"loggedUser\")).korisnickoIme);\n    },\n     vidiProdavca: function () {\n       this.$router.push(\"/api/prodavac/prodavac/proizvod/\"+this.$route.params.id);\n     },\n     \n     updateProdavac: function () {\n       const korisnik = JSON.parse(localStorage.getItem('loggedUser'));\n       this.$router.push(\"/api/prodavac/update/\"+korisnik.korisnickoIme);\n     },\n     checkSession: function () {\n      \n      axios\n        .get(`http://localhost:8081/api/check-session`, { withCredentials: true })\n        .then((response) => {\n        console.log(response.data);\n        \n      })\n        .catch((err) => {\n        console.log(err);\n        alert(err.response.data);\n      });\n      \n \n      \n    },\n    viewUsers: function(){\n      this.$router.push(\"/api/kupac/korisnici\");\n\n    },\n \n    ponudi: function(){\n     const logovani = JSON.parse(localStorage.getItem(\"loggedUser\"));\n     console.log(this.vrednostPonude);\n         axios\n         .post(\"http://localhost:8081/api/proizvod-aukcija/\"+ this.proizvod.id+\"?ponuda=\"+this.vrednostPonude, logovani, { withCredentials: true })\n         .then((response) => {\n         alert(response.data);\n         \n       })\n         .catch((err) => {\n         console.log(err);\n         alert(err.response.data);\n       });\n \n    },\n     logOut: function () {\n       localStorage.removeItem('loggedUser');\n       this.ulogovaniKorisnik = null;\n       alert(\"Uspesno ste se odjavili!\");\n       this.$router.push('/api/home');\n     },\n     isUserLogged: function () {\n      if (localStorage.getItem('loggedUser') == null) {\n        this.$router.push('/api/home');\n      }\n      else {\n        const korisnik = JSON.parse(localStorage.getItem('loggedUser'));\n        if (korisnik.uloga == 'PRODAVAC') {\n          \n        }\n        else if (korisnik.uloga == 'KUPAC') {\n          this.$router.push('/kupac/home/'+korisnik.korisnickoIme);\n        }\n        else {\n          this.$router.push('/administrator_view');\n        }\n      }\n    },\n     kupiFiksna: function (){\n       const logovani = JSON.parse(localStorage.getItem(\"loggedUser\"));\n         axios\n         .post(\"http://localhost:8081/api/proizvod-fiksnacena/\"+ this.proizvod.id, logovani, { withCredentials: true })\n         .then((response) => {\n         alert(response.data);\n         \n       })\n         .catch((err) => {\n         console.log(err);\n         alert(err.response.data);\n       });\n \n     }\n     }\n   };\n   </script>\n   \n   <style scoped>\n   ul li{\n     list-style-type: none;\n     padding: 0;\n     margin: 0;\n   }\n   .product-image {\n     max-width: 100%;\n     height: auto;\n   }\n   .nazivProizvoda{\n     padding: 15px;\n   }\n \n   #loginBtn {\n   background-color: #858585;\n   border-color: #858585;\n }\n \n #loginBtn:hover {\n   background-color: #3e4240;\n }\n \n #registerBtn {\n   background-color: #858585;\n   border-color: #858585;\n }\n \n #registerBtn:hover {\n   background-color: #3e4240;\n }\n \n .d-flex {\n   margin-right: auto;\n }\n \n #profile-photo{\n     width: 15%;\n     margin-right: 30px;\n     \n }\n #div-aukcija{\n margin: auto;\n }\n \n .mt-5 {\n   width: 15%;\n   height: 100%;\n   position: fixed;\n   display:block;\n   margin-left: 50px;\n   margin-right: 50px;\n \n  \n   \n \n }\n \n .justify-content-md-end{\n     margin-left: auto;\n     margin-right: 50px;\n }\n \n #log-out{\n     margin-top: auto;\n }\n \n .col-md-6{\n     margin: auto;\n     margin-top: 30px;\n     margin-bottom: 30px;\n }\n \n #btn-aukcija{\n     margin-top: 30px;\n }\n   </style>"]},"metadata":{},"sourceType":"module"}